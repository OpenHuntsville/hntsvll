<ul data-scope="errors" class="margin-t">
<!--     <li data-prop="message">
      Error message goes here.
    </li> -->
  </ul>
<form data-scope="people" id="people-form" data-prop="action">
  <fieldset class="margin-t">
    <legend>Profile Information</legend>
    <ul>
    <input type="hidden" data-prop="id" />
      <li>
        <label>Custom URL</label>
        <input type="text" data-prop="custom_url" name="people[custom_url]" id="custom_url">
      </li>
      <li>
        <label>First Name</label>
        <input type="text" data-prop="first_name" name="people[first_name]">
      </li>
      <li>
        <label>Last Name</label>
        <input type="text" data-prop="last_name" name="people[last_name]">
      </li>
      <li>
        <label>Email</label>
        <input type="text" data-prop="email" name="people[email]">
      </li>
      <li>
        <label>Company</label>
        <input type="text" data-prop="company" name="people[company]">
      </li>
      <li>
        <label>Twitter</label>
        <input type="text" data-prop="twitter" name="people[twitter]">
      </li>
      <li>
        <label>LinkedIn</label>
        <input type="text" data-prop="linkedin" name="people[linkedin]">
      </li>
      <li>
        <label>Website</label>
        <input type="text" data-prop="url" name="people[url]">
      </li>
      <li>
        <label>Image URL</label>
        <input type="text" data-prop="image_url" name="people[image_url]" readonly>
      </li>
      <li>
        <label>Bio</label>
        <textarea data-prop="bio" id="bio" name="people[bio]"></textarea>
        <p class="smalltext">You have <span id="bio-character-count"></span> characters left.</p>
      </li>
      <li>
        <label>First Category</label>
        <select type="text" data-prop="category_one"><option data-prop="category_one_id" selected></option></select>
      </li>
      <li>
        <label>Second Category</label>
        <select type="text" data-prop="category_two"></select>
      </li>
      <li>
        <label>Third Category</label>
        <select type="text" data-prop="category_three"></select>
      </li>
    </ul>
  </fieldset>
    
  <fieldset data-prop="admin_fieldset">
    <legend>Administrator Section</legend>
    <ul>
      <li>
        <label>Is approved?</label>
        <input data-prop="approved" type="checkbox" value="#" name="people[approved]">
      </li>
      <li>
        <label>Is admin?</label>
        <input data-prop="admin" type="checkbox" value="#" name="people[admin]" >
      </li>
    </ul>
  </fieldset>

  <input id="submit" type="submit" value="Save">
</form>

<script type="text/javascript">
$(document).ready(function(){
  $("#submit").click(function(e){
    if (($("#custom_url").val()).indexOf("-") != -1)
    {
      e.preventDefault();
    }
  });
  $('#custom_url').blur(function(){
    $.ajax({
    url: '/people/url-available',
    type: 'get',
    dataType: 'html',
    data: $('#people-form').serialize(),
    success: function(data) {
      if (data == 'failure')
      {
        $('#custom_url').css('background-color','rgba(255,0,0,0.25)');
      }
      else
      {
        $('#custom_url').css('background-color','white');
      }
      return false;
      }
    });
  });
});
</script>
